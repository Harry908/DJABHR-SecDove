@startuml
title Server Object Diagram (Runtime Instances)

object expressApp as "Express App" {
  helmet, cors
  routes=/api/*
}

object httpServer as "HTTP Server" {
  listen: PORT=3000 (default)
}

object io as "Socket.IO Server" {
  cors.origin = env.CORS_ORIGIN | http://localhost:5173
  events: connection, authenticate, join-conversation, leave-conversation
}

object db as "SQLite Database" {
  file=server/database/securedove.db
  foreign_keys=ON
}

object env as "EnvConfig (minimal loader)" {
  source=server/.env (if present)
  keys=PORT, JWT_SECRET, DB_PATH, CORS_ORIGIN, ...
}

object rateLimiter as "Rate Limiter" {
  api: 100 per 15m
  login: 5 per 15m
}

object jwt as "JWT" {
  secret=env.JWT_SECRET
  exp=24h
}

expressApp -- httpServer
httpServer -- io
expressApp -- rateLimiter
expressApp -- db
expressApp -- jwt
expressApp -- env

@enduml
